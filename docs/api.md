<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [ViberPlay][1]
    -   [initializeAsync][2]
        -   [Parameters][3]
    -   [setLoadingProgress][4]
        -   [Parameters][5]
        -   [Examples][6]
    -   [startGameAsync][7]
        -   [Examples][8]
    -   [updateAsync][9]
        -   [Parameters][10]
        -   [Examples][11]
    -   [shareAsync][12]
        -   [Parameters][13]
        -   [Examples][14]
    -   [quit][15]
    -   [getLocale][16]
        -   [Examples][17]
    -   [getEntryPointData][18]
    -   [onPause][19]
    -   [setSessionData][20]
        -   [Parameters][21]
        -   [Examples][22]
    -   [getLeaderboardAsync][23]
        -   [Parameters][24]
        -   [Examples][25]
    -   [subscribePlatformBotAsync][26]
        -   [Examples][27]
    -   [getMessengerPlatform][28]
        -   [Examples][29]
    -   [getInterstitialAdAsync][30]
        -   [Parameters][31]
        -   [Examples][32]
    -   [getRewardedVideoAdAsync][33]
        -   [Parameters][34]
        -   [Examples][35]
    -   [switchGameAsync][36]
        -   [Parameters][37]
        -   [Examples][38]
    -   [getTrafficSource][39]
        -   [Examples][40]
    -   [getEntryPointAsync][41]
        -   [Examples][42]
    -   [context.getID][43]
    -   [context.getType][44]
    -   [context.isSizeBetween][45]
    -   [context.createAsync][46]
        -   [Parameters][47]
    -   [context.switchAsync][48]
        -   [Parameters][49]
    -   [context.chooseAsync][50]
        -   [Parameters][51]
    -   [context.getPlayersAsync][52]
    -   [player.getDataAsync][53]
        -   [Parameters][54]
        -   [Examples][55]
    -   [player.setDataAsync][56]
        -   [Parameters][57]
        -   [Examples][58]
    -   [player.flushDataAsync][59]
    -   [player.getID][60]
        -   [Examples][61]
    -   [player.getName][62]
        -   [Examples][63]
    -   [player.getPhoto][64]
        -   [Examples][65]
    -   [player.getSignedPlayerInfoAsync][66]
        -   [Parameters][67]
        -   [Examples][68]
    -   [player.getConnectedPlayersAsync][69]
        -   [Examples][70]
    -   [player.canSubscribeBotAsync][71]
        -   [Examples][72]
    -   [player.subscribeBotAsync][73]
        -   [Examples][74]
    -   [payments.onReady][75]
        -   [Examples][76]
    -   [payments.getCatalogAsync][77]
        -   [Examples][78]
    -   [payments.purchaseAsync][79]
        -   [Parameters][80]
        -   [Examples][81]
    -   [payments.getPurchasesAsync][82]
        -   [Examples][83]
    -   [payments.consumePurchaseAsync][84]
        -   [Parameters][85]
        -   [Examples][86]
-   [ShareResult][87]
    -   [Properties][88]
-   [InitializationOptions][89]
    -   [Properties][90]
-   [SignedPlayerInfo][91]
    -   [getPlayerID][92]
        -   [Examples][93]
    -   [getSignature][94]
        -   [Examples][95]
-   [ContextSizeResponse][96]
    -   [Properties][97]
-   [LeaderboardPlayer][98]
-   [Leaderboard][99]
    -   [getName][100]
        -   [Examples][101]
    -   [getContextID][102]
        -   [Examples][103]
    -   [getEntryCountAsync][104]
        -   [Examples][105]
    -   [setScoreAsync][106]
        -   [Parameters][107]
        -   [Examples][108]
    -   [getPlayerEntryAsync][109]
        -   [Examples][110]
    -   [getEntriesAsync][111]
        -   [Parameters][112]
        -   [Examples][113]
    -   [getConnectedPlayerEntriesAsync][114]
        -   [Parameters][115]
        -   [Examples][116]
-   [Product][117]
    -   [Properties][118]
-   [ContextPlayer][119]
-   [Player][120]
    -   [getID][121]
        -   [Examples][122]
    -   [getName][123]
        -   [Examples][124]
    -   [getPhoto][125]
        -   [Examples][126]
    -   [hasPlayed][127]
        -   [Examples][128]
-   [ConnectedPlayer][129]
-   [LocalizableContent][130]
    -   [Properties][131]
-   [AdInstance][132]
    -   [getPlacementID][133]
        -   [Examples][134]
    -   [loadAsync][135]
        -   [Examples][136]
    -   [showAsync][137]
        -   [Examples][138]
-   [ContextChooseFilter][139]
-   [LeaderboardEntry][140]
    -   [getScore][141]
        -   [Examples][142]
    -   [getFormattedScore][143]
        -   [Examples][144]
    -   [getTimestamp][145]
        -   [Examples][146]
    -   [getRank][147]
        -   [Examples][148]
    -   [getExtraData][149]
        -   [Examples][150]
    -   [getPlayer][151]
        -   [Examples][152]
-   [SharePayload][153]
    -   [Properties][154]
-   [PurchaseConfig][155]
    -   [Properties][156]
-   [Purchase][157]
    -   [Properties][158]
-   [ContextChoosePayload][159]
    -   [Properties][160]
-   [CustomUpdatePayload][161]
    -   [Properties][162]
-   [SignedPurchaseRequest][163]

## ViberPlay

Top level namespace wrapping the SDK's interfaces.

### initializeAsync

Initialize the SDK for the game. In the background, SDK will try to
setup environment and retrieve data for later use in the game.

#### Parameters

-   `options` **[InitializationOptions][164]?** Options to alter the runtime behavior of the SDK. Can be omitted. (optional, default `{}`)

Returns **[Promise][165]&lt;void>** 

### setLoadingProgress

Updates the load progress of the game. The value will be shown at the
loading screen.

#### Parameters

-   `percentage` **[number][166]** Represents percentage of loading progress. It should
    be between 0 and 100. (optional, default `0`)

#### Examples

```javascript
ViberPlay.setLoadingProgress(50); // The game is halfway loaded
```

Returns **void** 

### startGameAsync

Starts the game. Calling this method will turn off the loading screen as
soon as these requirements are met:

-   ViberPlay.setLoadingProgress() is called with a number > 99
-   ViberPlay.initializeAsync() is called and resolved

#### Examples

```javascript
ViberPlay.startGameAsync().then(function() {
  myAwesomeGame.start();
});
```

Returns **[Promise][165]&lt;void>** 

### updateAsync

Post an update to the corresponding context. If the game is played in
a messenger chat thread, this will post a message into the thread with
the specified image and text message. And when people launch the game
from this message, those game sessions will be able to read the specified
data through `ViberPlay.getEntryPointData()`.

#### Parameters

-   `payload` **[CustomUpdatePayload][167]** An object describes the update message.

#### Examples

```javascript
ViberPlay.updateAsync({
  action: 'CUSTOM',
  cta: 'Call to action text',
  image: base64Picture,
  text: {
    default: 'Some text',
    localizations: {
      ja_JP: 'テキスト',
      en_US: 'Some text',
    }
  }
  data: { someData: '...' },
  strategy: 'IMMEDIATE',
  notification: 'NO_PUSH',
}).then(function() {
  // After the update is posted, closes the game.
  ViberPlay.quit();
});
```

Returns **[Promise][165]&lt;void>** 

### shareAsync

Share message to selected users from player's contact.

#### Parameters

-   `payload` **[SharePayload][168]** An object describes the message to be shared.

#### Examples

```javascript
ViberPlay.shareAsync({
  intent: 'REQUEST',
  image: base64Picture,
  text: 'Some text',
  filters: 'NEW_CONTEXT_ONLY',
  minShare: 3,
  data: { someData: '...' },
  description: 'Win 100 gems for every friend who joins from your invite.',
}).then(function(shareResult) {
  console.log(shareResult); // {sharedCount: 3}
});
```

Returns **[Promise][165]&lt;[ShareResult][169]>** 

### quit

Close the game webview.
[TODO] Currently not working in Viber.\`

Returns **void** 

### getLocale

Locale code will be based on `navigator.language` in the WebView, format
will be align with [BCP47][170].

#### Examples

```javascript
const ruLangs = /^(ru|ab|hy|av|az|ba|be|ce|cv|ka|kk|ky|tg|tk|tt|uk|uz)/i;

if (ruLangs.test(ViberPlay.getLocale())) {
  loadRuL10n();
}
```

Returns **[string][171]** 

### getEntryPointData

Get the entry point data bound to this message.

Returns **[Object][172]** 

### onPause

[TODO]

Returns **void** 

### setSessionData

(Experimental) Update data associated with the current game session.

Session data is persistent only within the current game session and is
used to populate payload of game_play webhook events.

If called multiple times during a session, data specified in subsequent calls will be merged
with existing data at the top level.

#### Parameters

-   `sessionData` **[Object][172]** an arbitrary data object

#### Examples

```javascript
ViberPlay.setSessionData({
  "high-score": 1000,
  "current-stage": "stage1",
})
```

Returns **void** 

### getLeaderboardAsync

Get a leaderboard by its name

#### Parameters

-   `name` **[string][171]** The name of the leaderboard

#### Examples

```javascript
ViberPlay.getLeaderboardAsync('some_leaderboard')
  .then(leaderboard => {
    console.log(leaderboard.getName()); // 'some_leaderboard'
  });
```

Returns **[Promise][165]&lt;[Leaderboard][173]>** 

### subscribePlatformBotAsync

(Experimental) (Viber only) Subscribe the platform bot.

#### Examples

```javascript
if (ViberPlay.getMessengerPlatform() === 'VIBER') {
  ViberPlay.subscribePlatformBotAsync();
}
```

Returns **[Promise][165]&lt;null>** 

### getMessengerPlatform

Get the current messenger platform

#### Examples

```javascript
ViberPlay.getMessengerPlatform(); // 'VIBER'
```

Returns **MessengerPlatform** 

### getInterstitialAdAsync

(Experimental) Get AdInstance of an interstitial ad placement

#### Parameters

-   `placementId` **[string][171]** 

#### Examples

```javascript
ViberPlay.getInterstitialAdAsync('DUMMY_PLACEMENT_ID')
  .then((adInstance) => {
    // do something
  });
```

Returns **[Promise][165]&lt;InterstitialAdInstance>** 

### getRewardedVideoAdAsync

(Experimental) Get AdInstance of a rewarded video ad placement

#### Parameters

-   `placementId` **[string][171]** 

#### Examples

```javascript
ViberPlay.getRewardedVideoAdAsync('DUMMY_PLACEMENT_ID')
  .then((adInstance) => {
    // do something
  });
```

Returns **[Promise][165]&lt;RewardedVideoAdInstance>** 

### switchGameAsync

(Experimental) Request to switch to another game

#### Parameters

-   `gameId` **[string][171]** the game ID of the target game
-   `data` **[Object][172]?** TODO the entry point data for the target game

#### Examples

```javascript
ViberPlay.switchGameAsync('arrQ8wIzzfBHsR0Cerroqns8ledhtug5', {
  from: 'prequel-game'
}).catch((e) => {
  // handling cases when failed to switch to the target game
});
```

Returns **[Promise][165]&lt;null>** 

### getTrafficSource

(Experimental) (Viber only) Get traffic source related url params set
on the game's wrapper.

#### Examples

```javascript
// Should be called after ViberPlay.initializeAsync() resolves
const trafficSource = ViberPlay.getTrafficSource();
console.log(trafficSource['utm_source']); // 'viber'
```

### getEntryPointAsync

(Experimental) Get information about where the game is started.
Details about available entry points can be found at
[entry-points.md][174].

#### Examples

```javascript
ViberPlay.getEntryPointAsync().then(console.log); // 'game_switch'
```

### context.getID

Get id of context

### context.getType

Get type of context

### context.isSizeBetween

Check if the count of players in context is between given numbers

### context.createAsync

Create context with player

#### Parameters

-   `playerId`  Player ID of the player

### context.switchAsync

Switch context by context id

#### Parameters

-   `playerId`  Context ID of the context

### context.chooseAsync

Popup a friend dialog to establish context

#### Parameters

-   `payload`  An object describes the choose context

### context.getPlayersAsync

Get an array of ContextPlayer containing players in the same context

### player.getDataAsync

Will get an object representing game data saved on the hosted platform.

#### Parameters

-   `keys`  An array of unique keys to retrieve data for.

#### Examples

```javascript
ViberPlay.player
  .getDataAsync(['hp', 'items'])
  .then(function(data) {
    console.log('data is loaded');
    var hp = data['hp'];
    var items = data['items'];
  });
```

Returns **any** Latest snapshot of game data

### player.setDataAsync

Will send update of game data to the hosted platform's server. The update
will be merged into existing game data.

Please be careful not to store a game data bigger than 1000 characters
when stringified, which will cause the modification be rejected.

#### Parameters

-   `data`  An object containing a set of key-value pairs to be
    stored on the hosted platform. The object must contain only serializable
    values - any non-serializable values will cause the entire modification
    to be rejected. Nullable value will be treated as removal of the key-value
    pair.

#### Examples

```javascript
ViberPlay.player
 .setDataAsync({
   items: ['item1', 'item2', 'item3'],
   hp: 123,
 })
 .then(function() {
   console.log('data is set');
 });
```

Returns **any** Latest snapshot of game data

### player.flushDataAsync

Will flush unsaved data to cloud storage

### player.getID

Get the player's ID.

#### Examples

```javascript
// Should be called after ViberPlay.initializeAsync() resolves
var playerID = ViberPlay.player.getID();
```

Returns **any** Player's ID

### player.getName

Get the player's name.

#### Examples

```javascript
// Should be called after ViberPlay.initializeAsync() resolves
var playerName = ViberPlay.player.getName();
```

Returns **any** Player's name

### player.getPhoto

Get the player's photo.

#### Examples

```javascript
var playerImage = new Image();
playerImage.crossOrigin = 'anonymous';
// Should be called after ViberPlay.initializeAsync() resolves.
playerImage.src = ViberPlay.player.getPhoto();
```

Returns **any** URL of player photo

### player.getSignedPlayerInfoAsync

Get a `SignedPlayerInfo` object with encrypted player's info. This can
be useful for game server to detect if the user's identity is really
sent from the hosted platform or tampered.

Please read `SignedPlayerInfo` for more information on how to use this.

#### Parameters

-   `payload`  An arbitary string to tag the signature

#### Examples

```javascript
ViberPlay.player.getSignedPlayerInfoAsync('some_metadata')
 .then(function (result) {
   // The verification of the ID and signature should happen on
   // server side.
   sendToGameServer(
     result.getPlayerID(), // same value as ViberPlay.player.getID()
     result.getSignature(),
     'GAIN_COINS',
     100);
 });
```

Returns **any** An object with encrypted player info

### player.getConnectedPlayersAsync

This returns an array containing the friends of the user who has
played the current game before.

#### Examples

```javascript
var connectedPlayers = ViberPlay.player.getConnectedPlayersAsync()
  .then(function(players) {
    console.log(players.map(function(player) {
      return {
        id: player.getID(),
        name: player.getName(),
      }
    }));
  });
// [{id: '123456789', name: 'foo'}, {id: '234567890', name: 'bar'}]
```

Returns **any** Array of connected players

### player.canSubscribeBotAsync

(Experimental) Checks if the current user can subscribe
the game's bot.
Please note that this API is currently a stub that only resolves
with true.

#### Examples

```javascript
ViberPlay.player.canSubscribeBotAsync()
  .then((result) => console.log(result));
```

Returns **any** Resolves with true if user can subscribe bot

### player.subscribeBotAsync

(Experimental) Start the process to subscribe the game's bot. Game
must check with ViberPlay.player.canSubscribeBotAsync() before this
API is called.
Please note that this API can terminate the game's window and navigate
user to the game's bot screen to start subscribing.

#### Examples

```javascript
ViberPlay.player.canSubscribeBotAsync()
  .then((result) => {
    if (!result) {
      throw new Error('CAN_NOT_SUBSCRIBE');
    }
    return ViberPlay.player.subscribeBotAsync();
  }))
  .then(() => console.log('ok'))
  .catch((err) => console.error(err));
```

Returns **any** 

### payments.onReady

(Experimental)

#### Examples

```javascript
ViberPlay.payments.onReady(function () {
  console.log('Ready to receive payments requests')
})
```

Returns **any** 

### payments.getCatalogAsync

(Experimental)

#### Examples

```javascript
ViberPlay.payments.getCatalogAsync().then((catalog) => {
  console.log(catalog)
})
```

Returns **any** Array of products with pricing information

### payments.purchaseAsync

(Experimental)

#### Parameters

-   `config`  An object containing purchase configuration information

#### Examples

```javascript
ViberPlay.payments.purchaseAsync({
  productID: 'someProduct',
  developerPayload: 'somePayload'
}).then((purchase) => {
  console.log(purchase)
})
```

Returns **any** Purchase information

### payments.getPurchasesAsync

(Experimental)

#### Examples

```javascript
ViberPlay.payments.getPurchasesAsync().then((purchases) => {
  console.log(purchases);
})
```

Returns **any** 

### payments.consumePurchaseAsync

(Experimental)

#### Parameters

-   `purchaseToken`  A string of purchase token used for consumption

#### Examples

```javascript
ViberPlay.payments.consumePurchaseAsync('somePurchaseToken').then(() => {
  console.log('Purchase is consumed');
})
```

Returns **any** 

## ShareResult

Type: [Object][172]

### Properties

-   `sharedCount` **[number][166]** Number of player user has sent share events.
    It will be returned after `ViberPlay.shareAsync()`.

## InitializationOptions

Type: [Object][172]

### Properties

-   `useLegacyLeaderboard` **[boolean][175]** If set to true the legacy leaderboard service will be used.
-   `scrollTarget` **([string][171] \| [Element][176])** ? - By default, scrolling will be locked in game frame to prevent unexpected behavior (e.g. scroll while flicking). If scrolling is needed, set an element (or its selector) here, then the element (including its children) will be scrollable. If scrolling lock needs to be disabled, set `document.body` here.

## SignedPlayerInfo

Represents player info in a secure way, encrypted by the server side of
the platform hosting the game.
Game server can decrypt this info on to verify if this is data is really
sent from the platform.

### getPlayerID

Get the player's ID

#### Examples

```javascript
ViberPlay.player.getSignedPlayerInfoAsync('some_metadata')
 .then(function (result) {
   result.getPlayerID(), // same value as ViberPlay.player.getID()
 });
```

Returns **[string][171]** Player ID

### getSignature

Get the signature string

On the game server, please validate this signature by the following steps:

1.  Split the signature into two parts delimited by the `.` character.
2.  Decode the first part with base64url encoding.
3.  Decode the second part with base64url encoding, which should be a
    string representation of an JSON object with fields below:

    -   algorithm - always `HMAC-SHA256`
    -   issued_at - a unix timestamp representing the time signature
        is issued.
    -   player_id - Auth ID of the player.
    -   request_payload - the requestPayload string you defined when
        calling `ViberPlay.player.getSignedPlayerInfoAsync`.

4.  Hash the second part string using HMAC SHA-256 and your app
    secret, check if it is identical to the first part string.
5.  You may also wish to validate the timestamp to see if the request was
    made recently.

#### Examples

```javascript
ViberPlay.player.getSignedPlayerInfoAsync('some_metadata')
 .then(function (result) {
   result.getSignature(); // some string like this, 'S0M3_5igNatvR3.eyJpc3N1ZWRfYXQiOiAxNTM5OTMxNDQ2LCAicGxheWVyX2lkIjogIjgwZDU4N2UyODkzNjdlNTVhZjRhNGQ0OTIyOThkNmRkNDdjMGFiYmMyMjc1YjNjMDQ0ODkyMTY2ZGE3MzM5NmYiLCAiYWxnb3JpdGhtIjogIkhNQUMtU0hBMjU2IiwgInJlcXVlc3RfcGF5bG9hZCI6ICJteV9tZXRhZGF0YSJ9'
 });
```

Returns **[string][171]** Signature

## ContextSizeResponse

Type: [Object][172]

### Properties

-   `answer` **[boolean][175]** Result
-   `minSize` **[number][166]** The minimum bound of the context size query
-   `maxSize` **[number][166]** The maximum bound of the context size query.

## LeaderboardPlayer

**Extends Player**

Representing a leaderboard player.

## Leaderboard

Representing a leaderboard. Can be retrieved by calling
`ViberPlay.getLeaderboardAsync()`.

### getName

Get the leaderboard's name.

#### Examples

```javascript
ViberPlay.getLeaderboardAsync('global_leaderboard')
  .then((leaderboard) => {
    leaderboard.getName(); // 'global_leaderboard'
  });
```

```javascript
ViberPlay.getLeaderboardAsync('context_leaderboard.8183471902')
  .then((leaderboard) => {
    leaderboard.getName(); // 'context_leaderboard.8183471902'
  });
```

Returns **[string][171]** Leaderboard name

### getContextID

Get ID of the context which the leaderboard belongs to. Returns `null` if
the leaderboard is not related to any context.

#### Examples

```javascript
ViberPlay.getLeaderboardAsync('context_leaderboard.8183471902')
  .then((leaderboard) => {
    leaderboard.getContextId(); // '8183471902'
  });
```

Returns **[string][171]?** Related context ID

### getEntryCountAsync

Get total number of entries inside the leaderboard.

#### Examples

```javascript
ViberPlay.getLeaderboardAsync('context_leaderboard.8183471902')
  .then((leaderboard) => {
    leaderboard.getEntryCountAsync().then((count) => {
      console.log('count: ', count); // count: 2
    });
  });
```

Returns **[Promise][165]&lt;[number][166]>** Total number of entries

### setScoreAsync

Submit score to the leaderboard and get the latest entry. A player can only
have one entry. If there's already an old entry, it will be only updated to
the a better score.

#### Parameters

-   `score` **[number][166]** The new score
-   `extraData` **[string][171]?** A string payload can be attached to the entry as extra info (optional, default `null`)

#### Examples

```javascript
leaderboard.setScoreAsync(100, 'Hello world')
  .then((entry) => {
    entry.getScore(); // 100
  });
```

Returns **[Promise][165]&lt;[LeaderboardEntry][177]>** Entry info

### getPlayerEntryAsync

Get current player's entry. Returns `null` if there isn't one.

#### Examples

```javascript
leaderboard.getPlayerEntryAsync()
  .then((entry) => {
    if (!entry) {
      console.log('No player entry found');
      return;
    }

    entry.getScore(); // 100
  });
```

Returns **[Promise][165]&lt;[LeaderboardEntry][177]?>** Entry info

### getEntriesAsync

Get a list of entries inside the leaderboard based on the count and rank
offset specified

#### Parameters

-   `count` **[number][166]** The number of maximum entries to be retruned
-   `offset` **[number][166]** The offset in the leaderborad (from the top) the entries to be returned

#### Examples

```javascript
// Get top 10 entries
leaderboard.getEntriesAsync(10, 0)
  .then((entries) => {
    console.log(entries.length); // 10 if there're >= 10 entries
  });
```

Returns **[Promise][165]&lt;[Array][178]&lt;[LeaderboardEntry][177]>>** Array of entry info

### getConnectedPlayerEntriesAsync

Get a list of connected player entries inside the leaderboard based on the count and rank
offset specified

#### Parameters

-   `count` **[number][166]** The number of maximum entries to be retruned
-   `offset` **[number][166]** The offset in the leaderborad (from the top) the entries to be returned

#### Examples

```javascript
// Get top 10 friend entries
leaderboard.getConnectedPlayerEntriesAsync(10, 0)
  .then((entries) => {
    console.log(entries.length); // 10 if there're >= 10 friend entries
  });
```

Returns **[Promise][165]&lt;[Array][178]&lt;[LeaderboardEntry][177]>>** Array of entry info

## Product

Type: [Object][172]

### Properties

-   `title` **[string][171]** Title of the product
-   `productID` **[string][171]** ID of the product
-   `description` **[string][171]?** Text description of the product
-   `imageURI` **[string][171]?** A URL to the product's image
-   `price` **[string][171]** A localized string representing the product's pirce in the local currency, e.g. "$1"
-   `priceCurrencyCode` **[string][171]** A string representing which currency is the price calculated in, following [ISO 4217][179]

## ContextPlayer

**Extends Player**

Representing a context player.

## Player

Representing a player.

### getID

Get the player's ID.

#### Examples

```javascript
player.getID(); // '5458282176661711'
```

Returns **[string][171]** Player ID

### getName

Get the player's name.

#### Examples

```javascript
player.getName(); // 'Alpha Omega'
```

Returns **[string][171]** Player name

### getPhoto

Get the player's photo.

#### Examples

```javascript
player.getPhoto(); // A CORS supported URL to user's photo
```

Returns **[string][171]** URL of player photo

### hasPlayed

(Experimental) Get the player's playing status.

#### Examples

```javascript
player.hasPlayed();
```

Returns **[string][171]** A boolean value showing if the player has played the game before

## ConnectedPlayer

**Extends Player**

Representing a connected player.

## LocalizableContent

LocalizableContent
To provide localized versions of your own call to action, pass an object
with the default cta as the value of 'default' and another object mapping
locale keys to translations as the value of 'localizations'.

Type: [Object][172]

### Properties

-   `default` **[string][171]** The text to be used if no suitable text is
    found.
-   `ja_JP` **[string][171]?** The text to be used for ja_JP locale.
-   `en_US` **[string][171]?** The text to be used for en_US locale.

## AdInstance

(Experimental) Representing an ad.

### getPlacementID

(Experimental) Get the ad's placement ID.

#### Examples

```javascript
adInstance.getPlacementID(); // '5458282176661711'
```

Returns **[string][171]** Placement ID

### loadAsync

(Experimental) Start loading ad.
Notes: On Android, the interstitial ad will start autoplaying right
after it's loaded. To give the best result, please start loading the
interstitial ad right before you want to show it.

#### Examples

```javascript
// after adInstance is created
adInstance.loadAsync();
```

Returns **[string][171]** 

### showAsync

(Experimental) Show the loaded ad to player. The returned promise will be only resolved
when user closed the ad's overlay.

#### Examples

```javascript
// after adInstance is loaded
adInstance.showAsync();
```

Returns **[Promise][165]&lt;void>** 

## ContextChooseFilter

Type: (`"NEW_CONTEXT_ONLY"` \| `"INCLUDE_EXISTING_CHALLENGES"` \| `"NEW_PLAYERS_ONLY"` \| `"NEW_INVITATIONS_ONLY"`)

## LeaderboardEntry

Represent a leaderboard entry. An entry is created when a player submit score
to the leaderboard for the first time. After creation, the entry will be
only updated when a better score is submit by this player.

### getScore

Get the score of this entry.

#### Examples

```javascript
leaderboard.setScoreAsync(100, 'Hello world')
  .then((entry) => {
    entry.getScore(); // 100
  });
```

Returns **[number][166]** Score

### getFormattedScore

Get the formatted score of this entry. Format is based on the
leaderboard's setting.

#### Examples

```javascript
leaderboard.setScoreAsync(100, 'Hello world')
  .then((entry) => {
    entry.getFormattedScore(); // '100pt'
  });
```

Returns **[string][171]** Formatted score

### getTimestamp

Get the timestamp of when the entry is updated or created for the last
time.

#### Examples

```javascript
leaderboard.setScoreAsync(100, 'Hello world')
  .then((entry) => {
    entry.getTimestamp(); // 1527810893
  });
```

Returns **[number][166]** Timestamp of last update or creation

### getRank

Get the rank of this player. It's calculated based on the entry's score
and the leaderboard's sort setting.

#### Examples

```javascript
leaderboard.setScoreAsync(100, 'Hello world')
  .then((entry) => {
    entry.getRank(); // 2
  });
```

Returns **[number][166]** Rank

### getExtraData

Get the extra data submit with the last update. Returns `null` if no
extra data exists.

#### Examples

```javascript
leaderboard.setScoreAsync(100, 'Hello world')
  .then((entry) => {
    entry.getExtraData(); // 'Hello world'
  });
```

Returns **[string][171]?** Extra data appended with last update or creation

### getPlayer

Get the player's info of this entry.

#### Examples

```javascript
leaderboard.setScoreAsync(100, 'Hello world')
  .then((entry) => {
    entry.getPlayer().getID(); // '5458282176661711'
  });
```

Returns **[LeaderboardPlayer][180]** Player's info

## SharePayload

Type: [Object][172]

### Properties

-   `intent` **(`"INVITE"` \| `"REQUEST"` \| `"CHALLENGE"` \| `"SHARE"`)** [TODO]
    Represents content to be shared by the user.
-   `image` **[string][171]** A string containing data URL of a base64
    encoded image.
-   `text` **([string][171] \| [LocalizableContent][181])** Text message of this share.
-   `data` **[Object][172]?** An object to be passed to any session launched
    from this update. It can be accessed from `ViberPlay.getEntryPointData()`.
    Its size must be &lt;= 1000 chars when stringified.
-   `filters` **(`"NEW_CONTEXT_ONLY"` \| `"INCLUDE_EXISTING_CHALLENGES"` \| `"NEW_PLAYERS_ONLY"` \| `"NEW_INVITATIONS_ONLY"`)?** Filters
-   `minShare` **[number][166]** Minimum selected players to share
-   `description` **([string][171] \| [LocalizableContent][181])** Optional customizable text field which can be used to describe the 
    reward a user can get from sharing.

## PurchaseConfig

Type: [Object][172]

### Properties

-   `productID` **[string][171]** ID of the product
-   `developerPayload` **[string][171]?** An optional payload can be assigned by game developer, which will be attached in the signed purchase request

## Purchase

Type: [Object][172]

### Properties

-   `productID` **[string][171]** ID of the product
-   `developerPayload` **[string][171]?** An optional payload can be assigned by game developer, which will be attached in the signed purchase request

## ContextChoosePayload

Type: [Object][172]

### Properties

-   `filters` **[Array][178]&lt;[ContextChooseFilter][182]>** Provide an array of filters you'd like to apply to the friend list.
    Please note that filter combinations are not supported at the moment of
    writing. Only the first filter is respected, the later ones are simply just
    ignored.
-   `maxSize` **[number][166]** Context maximum size for matching
-   `minSize` **[number][166]** Context minimum size for matching
-   `hoursSinceInvitation` **[number][166]** Specify how long a friend should
    be filtered out after the curent player sends him/her a message.
    This parameter only applies when `NEW_INVITATIONS_ONLY` filter is used.
    When not specified, will filter out any friend who has been sent a message.

## CustomUpdatePayload

Type: [Object][172]

### Properties

-   `action` **[string][171]** This should be 'CUSTOM'.
-   `template` **[string][171]** [TODO] ID of the template this custom
    update is using. Templates should be predefined in fbapp-config.json.
    See the [Bundle Config documentation][https://developers.facebook.com/docs/games/instant-games/bundle-config][183]
    for documentation about fbapp-config.json.
-   `cta` **([string][171]? | [LocalizableContent][181]?)** [TODO] An optional
    call-to-action button text. By default we will use a localized 'Play'
    as the button text.
-   `image` **[string][171]** A string containing data URL of a base64
    encoded image.
-   `text` **([string][171] \| [LocalizableContent][181])** Text message of this update.
-   `data` **[Object][172]?** An object to be passed to any session launched
    from this update. It can be accessed from `ViberPlay.getEntryPointData()`.
    Its size must be &lt;= 1000 chars when stringified.
-   `strategy` **(`"IMMEDIATE"` \| `"LAST"` \| `"IMMEDIATE_CLEAR"`)?** [TODO] Defines how the update should be delivered.
    'IMMEDIATE': The update should be posted immediately.
    'LAST': The update should be posted when the game session ends. The most
    recent update sent using the 'LAST' strategy will be the one sent.
    'IMMEDIATE_CLEAR': The update is posted immediately, and clears any other
    pending updates (such as those sent with the 'LAST' strategy).If no strategy is specified, we default to 'IMMEDIATE'.
-   `notification` **(`"NO_PUSH"` \| `"PUSH"`)?** Specifies notification
    setting for the custom update. This can be 'NO_PUSH' or 'PUSH', and defaults
    to 'NO_PUSH'. Use push notification only for updates that are high-signal
    and immediately actionable for the recipients. Also note that push
    notification is not always guaranteed, depending on user setting and
    platform policies.

## SignedPurchaseRequest

Type: [string][171]

[1]: #viberplay

[2]: #initializeasync

[3]: #parameters

[4]: #setloadingprogress

[5]: #parameters-1

[6]: #examples

[7]: #startgameasync

[8]: #examples-1

[9]: #updateasync

[10]: #parameters-2

[11]: #examples-2

[12]: #shareasync

[13]: #parameters-3

[14]: #examples-3

[15]: #quit

[16]: #getlocale

[17]: #examples-4

[18]: #getentrypointdata

[19]: #onpause

[20]: #setsessiondata

[21]: #parameters-4

[22]: #examples-5

[23]: #getleaderboardasync

[24]: #parameters-5

[25]: #examples-6

[26]: #subscribeplatformbotasync

[27]: #examples-7

[28]: #getmessengerplatform

[29]: #examples-8

[30]: #getinterstitialadasync

[31]: #parameters-6

[32]: #examples-9

[33]: #getrewardedvideoadasync

[34]: #parameters-7

[35]: #examples-10

[36]: #switchgameasync

[37]: #parameters-8

[38]: #examples-11

[39]: #gettrafficsource

[40]: #examples-12

[41]: #getentrypointasync

[42]: #examples-13

[43]: #contextgetid

[44]: #contextgettype

[45]: #contextissizebetween

[46]: #contextcreateasync

[47]: #parameters-9

[48]: #contextswitchasync

[49]: #parameters-10

[50]: #contextchooseasync

[51]: #parameters-11

[52]: #contextgetplayersasync

[53]: #playergetdataasync

[54]: #parameters-12

[55]: #examples-14

[56]: #playersetdataasync

[57]: #parameters-13

[58]: #examples-15

[59]: #playerflushdataasync

[60]: #playergetid

[61]: #examples-16

[62]: #playergetname

[63]: #examples-17

[64]: #playergetphoto

[65]: #examples-18

[66]: #playergetsignedplayerinfoasync

[67]: #parameters-14

[68]: #examples-19

[69]: #playergetconnectedplayersasync

[70]: #examples-20

[71]: #playercansubscribebotasync

[72]: #examples-21

[73]: #playersubscribebotasync

[74]: #examples-22

[75]: #paymentsonready

[76]: #examples-23

[77]: #paymentsgetcatalogasync

[78]: #examples-24

[79]: #paymentspurchaseasync

[80]: #parameters-15

[81]: #examples-25

[82]: #paymentsgetpurchasesasync

[83]: #examples-26

[84]: #paymentsconsumepurchaseasync

[85]: #parameters-16

[86]: #examples-27

[87]: #shareresult

[88]: #properties

[89]: #initializationoptions

[90]: #properties-1

[91]: #signedplayerinfo

[92]: #getplayerid

[93]: #examples-28

[94]: #getsignature

[95]: #examples-29

[96]: #contextsizeresponse

[97]: #properties-2

[98]: #leaderboardplayer

[99]: #leaderboard

[100]: #getname

[101]: #examples-30

[102]: #getcontextid

[103]: #examples-31

[104]: #getentrycountasync

[105]: #examples-32

[106]: #setscoreasync

[107]: #parameters-17

[108]: #examples-33

[109]: #getplayerentryasync

[110]: #examples-34

[111]: #getentriesasync

[112]: #parameters-18

[113]: #examples-35

[114]: #getconnectedplayerentriesasync

[115]: #parameters-19

[116]: #examples-36

[117]: #product

[118]: #properties-3

[119]: #contextplayer

[120]: #player

[121]: #getid

[122]: #examples-37

[123]: #getname-1

[124]: #examples-38

[125]: #getphoto

[126]: #examples-39

[127]: #hasplayed

[128]: #examples-40

[129]: #connectedplayer

[130]: #localizablecontent

[131]: #properties-4

[132]: #adinstance

[133]: #getplacementid

[134]: #examples-41

[135]: #loadasync

[136]: #examples-42

[137]: #showasync

[138]: #examples-43

[139]: #contextchoosefilter

[140]: #leaderboardentry

[141]: #getscore

[142]: #examples-44

[143]: #getformattedscore

[144]: #examples-45

[145]: #gettimestamp

[146]: #examples-46

[147]: #getrank

[148]: #examples-47

[149]: #getextradata

[150]: #examples-48

[151]: #getplayer

[152]: #examples-49

[153]: #sharepayload

[154]: #properties-5

[155]: #purchaseconfig

[156]: #properties-6

[157]: #purchase

[158]: #properties-7

[159]: #contextchoosepayload

[160]: #properties-8

[161]: #customupdatepayload

[162]: #properties-9

[163]: #signedpurchaserequest

[164]: #initializationoptions

[165]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[166]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[167]: #customupdatepayload

[168]: #sharepayload

[169]: #shareresult

[170]: http://www.ietf.org/rfc/bcp/bcp47.txt

[171]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[172]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[173]: #leaderboard

[174]: ./entry-points.md

[175]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[176]: https://developer.mozilla.org/docs/Web/API/Element

[177]: #leaderboardentry

[178]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[179]: https://en.wikipedia.org/wiki/ISO_4217

[180]: #leaderboardplayer

[181]: #localizablecontent

[182]: #contextchoosefilter

[183]: https://developers.facebook.com/docs/games/instant-games/bundle-config
